# 写一个微信跳一跳辅助脚本

本文将使用一种很简单的算法实现微信跳一跳。微信跳一跳自动刷分的方法一般两种：修改数据包和计算机模拟人手操作（物理外挂，此处不解释）。
直接修改数据包很容易被封号，在此讲解一种计算机模拟人手操作的方法。
整个流程很简单：获取当前游戏截图 -> 分析目标棋盘位置和棋子位置 -> 计算出棋子距离棋盘的长度 -> 长度 * 系数 = 按压时间 -> 按压屏幕 -> 循环

1. 获取当前游戏截图
截图命令：
```powershell
adb shell screencap /sdcard/screen.png
```
获取截图命令：
```powershell
adb pull /sdcard/screen.png
```
以上两个命令就获取了当前手机屏幕截图，这个地方使用的是android的adb工具，IOS可以使用wad，不过建议下载一个蓝叠模拟器这样使用更稳定方便快捷。

2. 分析目标棋盘位置和棋子位置
分析可以知道，微信跳一跳背景颜色接近纯色，而且目标棋盘位置和棋子位置大约距离游戏界面上方1/3左右，距离游戏界面下方也是1/3左右，因此只要分析游戏界面中间那1/3的空间即可。
截取这部分图片，然后从左上角开始扫描图片像素点，计算当前像素点和上一个像素点的欧几里得距离，如果两个像素点的距离值大于20则找到目标棋盘最上面一点的位置。使用颜色拾取器获取棋子最下面的颜色值，然后扫描直到当前像素点的值和棋子最下面一点的颜色的欧几里得距离小于10位置。这样就找到了棋子的位置。 计算两点之间的距离。

3. 计算按压时间
将游戏截图的宽度转换成720p的情况下，系数大约是2.04，因此
```matlab
按压屏幕时间 = 距离 * 2.04
```

4. 按压屏幕
按压屏幕命令：
```powershell
adb shell input swipe $x $y $x $y $duration
```
这里使用了adb的滑动命令，$duration指的就是按压屏幕的持续时间。

5. 循环执行以上步骤